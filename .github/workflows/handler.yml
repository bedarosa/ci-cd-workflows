name: Release Candidate Workflow

on:
    pull_request: 
        types: [labeled, closed]

permissions:
  contents: read
  pull-requests: write  # Adicione a permissão necessária aqui

  
jobs:

    handle_label:
      runs-on: ubuntu-latest
      steps:
        - name: Check PR Labels
          id: set_output
          run: |
            labels="${{ toJSON(github.event.pull_request.labels) }}"
            echo "Rótulos: $labels"

            if echo "$labels" | grep -q orbitdotnet; then
              echo "O rótulo 'orbitdotnet' está presente."
              echo "orbitdotnet_found=true" >> $GITHUB_ENV
            else
              echo "O rótulo 'orbitdotnet' NÃO está presente."
              echo "orbitdotnet_found=false" >> $GITHUB_ENV
            fi

            if echo "$labels" | grep -q results; then
              echo "O rótulo 'results' está presente."
              echo "results_found=true" >> $GITHUB_ENV
            else
              echo "O rótulo 'results' NÃO está presente."
              echo "results_found=false" >> $GITHUB_ENV
            fi


    check-labels:
        needs: handle_label
        runs-on: ubuntu-latest
        steps:
          - name: Get Labels Output
            run: |
              if [ "${{ env.orbitdotnet_found }}" = "true" ]; then
                echo "Ações a serem executadas quando o rótulo é encontrado."
              else
                echo "Ações alternativas quando o rótulo não é encontrado."
              fi

              if [ "${{ env.results_found }}" = "true" ]; then
                echo "Ações a serem executadas quando o rótulo é encontrado."
              else
                echo "Ações alternativas quando o rótulo não é encontrado."
              fi


